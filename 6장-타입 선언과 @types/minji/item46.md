## 타입 선언과 관련된 세 가지 버전 이해하기

- 타입스크립트를 이용할 때는 라이브러리의 버전, 타입 선언(@types)의 버전, 타입스크립트의 버전을 고려해야 함

  - 라이브러리 버전이 타입 선언보다 높은 경우

    - (타입 선언이 존재한다면)타입 선언 업데이트
    - (타입 선언이 존재하지 않는다면)보강(augmentation) 기법을 활용하여 사용하려는 새 함수와 메서드의 타입 정보를 프로젝트 자체에 추가, 직접 커뮤니티에 기여

  - 라이브러리 버전이 타입 선언보다 낮은 경우

    - 라이브러리 버전업
    - 타입스크립트 버전다운

  - 프로젝트에서 사용하는 타입스크립트 버전보다 라이브러리에서 필요로 하는 타입스크립트 버전이 높은 경우

    - 유명 라이브러리는 타입 스크립트에서 타입 시스템이 개선되고 버전이 올라가는 편
    - `declare module` 선언으로 라이브러리 타입 정보 삭제
    - 라이브러리에서 typeVersions 를 통해 타입스크립트 버전별로 다른 타입 선언을 제공한다면 사용(단 매우 드물게 제공됨)

- @types 의존성 중복

  - 중복이 발생하는 곳을 업데이트해서 서로 버전이 호환되도록 만듦
  - @types 가 전이 의존성을 가지도록 만드는 것은 종종 문제가 될 수 있음

- 자체적으로 타입 선언이 포함(번들링)된 경우에 라이브러리가 타입스크립토로 작성되고 컴파일러를 통해 타입 선언이 생성됐었다면 버전 불일치 문제를 해결하지만 네 가지 부수적인 문제점을 가짐

  - 보강 기법으로 해결할 수 없는 오류가 번들링된 타입 선언에 있거나 공개 시점에는 잘 동작했지만 타입스크립트 버전이 올라가면서 오류가 발생할 수 있음. @types 를 별도로 사용하는 경우라면 라이브러리 자체의 버전에 맞게 선택할 수 있지만, 번들된 타입에서는 버전 선택이 불가능함
  - 프로젝트 내의 타입 선언이 다른 라이브러리의 타입 선언에 의존하면 보통은 devDependencies에 의존성이 들어가기 때문에 타입 오류가 발생될 수 있음
  - 프로젝트의 과거 버전에 있는 타입 선언에 문제가 있는 경우, 과거 버전으로 돌아가서 패치 업데이트를 해야 함
  - 타입 선언의 패치 업데이트를 자주 하기 어려움

  => DefinitelyTyped 에 타입 정보만 분리하여 공개하는 것과 장단점을 비교해보는 것이 좋음. 라이브러리가 타입스크립트로 작성된 경우만 타입 선언을 라이브러리에 포함하는 것이 좋음
